<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Metatags -->
    <meta name="description" content="Weather Now - Get the current weather conditions of any city">
    <meta name="keywords" content="weather, forecast, temperature, city">
    <meta name="author" content="Jefferson Aguiar">
    <!-- stylesheet -->
    <link rel="stylesheet" href="assets/css/style.css">
    <!-- Favicon -->
    <link rel="icon" href="assets/images/icons/weather-forecast-16484.png" type="image/x-icon">
    <!-- Google Charts -->
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <title>Weather Now</title>
</head>
<body>
    <!-- Header Section -->
    <header>
         <!-- GSAP Animation -->
    <div class="intro final">
        <div class="block b1">Be</div>
        <div class="block b2">ready</div>
        <div class="block b3">for</div>
        <div class="block b4">anything</div>
        <div class="logo-weather">Weather</div>
        <div class="logo-now">Now</div>
    </div>    

        <div class="container">
            <h1>Weather Now</h1>
        </div>
    </header>
    <!-- Main Section -->
    <main>
        <!-- Search Section -->
        <div class="search">
            <input type="text" placeholder="Enter the city name...">
            <div id="search-history"></div>
        </div>
        <!-- Error Messages -->
        <div class="error-message" id="location404"></div>
        <div class="error-message" id="error-message-user-location"></div>
        <div class="error-message" id="error-message-user-forecast"></div>
        <!-- Favorite Section -->
        <div id="favorite-weather"></div>
        <!-- Side bar -->
        <div id="side-bar">
            <div id="side-bar-close-btn"><i class="fa fa-arrow-circle-right" aria-hidden="true"></i></div>
                <div id="side-bar-content">
                    <!-- Favorite Section -->
                    <div id="favorites-btn" class="button-container"><i class="fa fa-bookmark" aria-hidden="true"></i><p>Favorite</p></div>
                    <!-- History button -->
                    <button id="show-history-btn" class="button-container"><i class="fa fa-history" aria-hidden="true"></i><p>History</p></button>
                    <!-- Dark mode toggle -->
                    <button id="dark-mode-btn" class="button-container"><i class="fa fa-moon-o" aria-hidden="true"></i><p>Dark Mode</p></button>
                    <!-- GitHub link button -->
                    <a target="_blank" href="https://github.com/jeffdruid/weather-now">
                        <button id="github-link-btn" class="button-container"><i class="fa fa-github" aria-hidden="true"></i><p>Github</p></button>
                    </a>
                </div>
            </div>
        </div>

        <!-- Weather Section -->
        <div id="weather" class="weather-container">
            <!-- Favorite button -->
            <div id="set-favorite-btn"><i class="fa fa-heart" aria-hidden="true"></i></div>
           
            <!-- Weather info -->
            <div id="location"></div>
            <div id="country"></div>
            <img id="flag-icon">
            <div id="temperature"></div>
            <div id="feels-like"></div>
            <div id="max-temp"></div>
            <div id="min-temp"></div>
            <div id="sun-rise"></div>
            <div id="sun-set"></div>
            <img id="weather-icon">
            <div id="weather-desc"></div>
            <div id="wind"></div>
            <div id="humidity"></div>

            <!-- Refresh and Convert buttons -->
            <button id="refresh-button"><i class="fa fa-refresh" aria-hidden="true"></i></button>
            <button id="temperature-toggle-btn"></button>
            <div id="last-updated"></div>
            
            <!-- Forecast button -->
            <div id="forecast-btn"><i class="fa fa-plus-square-o" aria-hidden="true"></i></div>
            <!-- Chart button -->
            <button id="chart-btn"><i class="fa fa-chart-line"></i> </button>
        </div>
        <!-- Forecast Section -->
        <div id="forecast"></div>
        <!-- Google Charts -->
        <div id="chart_div"></div>        
        <!-- Users current weather info -->
        <marquee behavior="scroll" direction="left" scrollamount="5">
            <div class="current-info">
                <span id="current-time"></span>
                <span id="temperature-now"></span>
                <span id="current-location"></span>
                <img id="current-flag">
                <span id="current-feels-like"></span>
                <span id="current-desc"></span>
                <span id="current-max"></span>
                <span id="current-min"></span>
                <span id="current-sunrise"></span>
                <span id="current-sunset"></span>
                <span id="current-wind"></span>
                <span id="current-humidity"></span>
            </div>
        </marquee>
    </main>
    <!-- Footer Section -->
    <footer>
        @2024 Weather Now. All rights reserved.
    </footer>
    <!-- Scripts -->
    <script type="module" src="assets/js/script.js"></script>
    <!-- Font Awesome -->
    <script src="https://kit.fontawesome.com/6b0af4bcb3.js" crossorigin="anonymous"></script>
    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/Flip.min.js"></script>
    <!-- Your existing code -->
    <script type="module" src="assets/js/script.js"></script>
    <script>
        gsap.registerPlugin(Flip);

        let layouts = ["final", "plain", "columns", "grid"],
            intro = document.querySelector(".intro"),
            curLayout = 0; // index of the current layout

        function nextState() {
        const state = Flip.getState(".block, .logo-weather, .logo-now", {props: "color,backgroundColor", simple: true}); // capture current state
        
        intro.classList.remove(layouts[curLayout]); // remove old class
        curLayout = (curLayout + 1) % layouts.length;   // increment (loop back to the start if at the end)
        intro.classList.add(layouts[curLayout]);    // add the new class

        Flip.from(state, { // animate from the previous state
            absolute: true,
            stagger: 0.07,
            duration: 0.7,
            ease: "power2.inOut",
            spin: curLayout === 0, // only spin when going to the "final" layout
            simple: true,
            onEnter: (elements, animation) => gsap.fromTo(elements, {opacity: 0}, {opacity: 1, delay: animation.duration() - 0.1}),
            onLeave: elements => gsap.to(elements, {opacity: 0})
        });

        gsap.delayedCall(curLayout === 0 ? 3.5 : 1.5, nextState);
        }

        gsap.delayedCall(1, nextState);
    </script>
</body>
</html>